var cov_1l82dguaqr=function(){var path="C:\\Users\\Anton\\Desktop\\Edu\\TDP013\\Slutprojekt\\app.js",hash="88164915d02b932cbe5858dfc023d0c1c018e06b",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\Anton\\Desktop\\Edu\\TDP013\\Slutprojekt\\app.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:12},end:{line:2,column:21}},"2":{start:{line:4,column:13},end:{line:4,column:28}},"3":{start:{line:5,column:0},end:{line:5,column:16}},"4":{start:{line:6,column:0},end:{line:6,column:25}},"5":{start:{line:8,column:15},end:{line:8,column:48}},"6":{start:{line:9,column:11},end:{line:9,column:39}},"7":{start:{line:11,column:11},end:{line:11,column:26}},"8":{start:{line:14,column:18},end:{line:14,column:48}},"9":{start:{line:15,column:10},end:{line:15,column:42}},"10":{start:{line:16,column:15},end:{line:16,column:42}},"11":{start:{line:21,column:1},end:{line:57,column:4}},"12":{start:{line:22,column:2},end:{line:22,column:20}},"13":{start:{line:22,column:10},end:{line:22,column:20}},"14":{start:{line:25,column:2},end:{line:25,column:22}},"15":{start:{line:28,column:2},end:{line:30,column:5}},"16":{start:{line:29,column:3},end:{line:29,column:21}},"17":{start:{line:29,column:11},end:{line:29,column:21}},"18":{start:{line:32,column:2},end:{line:56,column:3}},"19":{start:{line:35,column:3},end:{line:55,column:6}},"20":{start:{line:36,column:4},end:{line:36,column:22}},"21":{start:{line:36,column:12},end:{line:36,column:22}},"22":{start:{line:37,column:4},end:{line:37,column:35}},"23":{start:{line:38,column:21},end:{line:38,column:94}},"24":{start:{line:39,column:4},end:{line:42,column:7}},"25":{start:{line:40,column:5},end:{line:40,column:23}},"26":{start:{line:40,column:13},end:{line:40,column:23}},"27":{start:{line:41,column:5},end:{line:41,column:39}},"28":{start:{line:44,column:21},end:{line:44,column:90}},"29":{start:{line:45,column:4},end:{line:48,column:7}},"30":{start:{line:46,column:5},end:{line:46,column:23}},"31":{start:{line:46,column:13},end:{line:46,column:23}},"32":{start:{line:47,column:5},end:{line:47,column:39}},"33":{start:{line:50,column:21},end:{line:50,column:89}},"34":{start:{line:51,column:4},end:{line:54,column:7}},"35":{start:{line:52,column:5},end:{line:52,column:23}},"36":{start:{line:52,column:13},end:{line:52,column:23}},"37":{start:{line:53,column:5},end:{line:53,column:39}},"38":{start:{line:62,column:0},end:{line:62,column:24}},"39":{start:{line:65,column:0},end:{line:65,column:34}},"40":{start:{line:66,column:0},end:{line:66,column:49}},"41":{start:{line:72,column:0},end:{line:109,column:3}},"42":{start:{line:73,column:17},end:{line:73,column:35}},"43":{start:{line:74,column:17},end:{line:74,column:35}},"44":{start:{line:75,column:1},end:{line:108,column:2}},"45":{start:{line:77,column:2},end:{line:77,column:41}},"46":{start:{line:78,column:2},end:{line:78,column:9}},"47":{start:{line:82,column:18},end:{line:82,column:91}},"48":{start:{line:84,column:2},end:{line:107,column:5}},"49":{start:{line:85,column:3},end:{line:85,column:59}},"50":{start:{line:85,column:11},end:{line:85,column:50}},"51":{start:{line:85,column:51},end:{line:85,column:58}},"52":{start:{line:86,column:15},end:{line:86,column:21}},"53":{start:{line:87,column:16},end:{line:87,column:21}},"54":{start:{line:89,column:3},end:{line:95,column:4}},"55":{start:{line:91,column:4},end:{line:94,column:5}},"56":{start:{line:93,column:5},end:{line:93,column:19}},"57":{start:{line:96,column:3},end:{line:106,column:4}},"58":{start:{line:98,column:4},end:{line:98,column:79}},"59":{start:{line:102,column:4},end:{line:105,column:7}},"60":{start:{line:103,column:5},end:{line:103,column:61}},"61":{start:{line:103,column:13},end:{line:103,column:52}},"62":{start:{line:103,column:53},end:{line:103,column:60}},"63":{start:{line:104,column:5},end:{line:104,column:98}},"64":{start:{line:112,column:0},end:{line:142,column:3}},"65":{start:{line:113,column:17},end:{line:113,column:35}},"66":{start:{line:114,column:17},end:{line:114,column:35}},"67":{start:{line:115,column:1},end:{line:141,column:2}},"68":{start:{line:117,column:2},end:{line:117,column:41}},"69":{start:{line:118,column:2},end:{line:118,column:9}},"70":{start:{line:122,column:2},end:{line:140,column:5}},"71":{start:{line:123,column:3},end:{line:123,column:59}},"72":{start:{line:123,column:11},end:{line:123,column:50}},"73":{start:{line:123,column:51},end:{line:123,column:58}},"74":{start:{line:124,column:15},end:{line:124,column:21}},"75":{start:{line:125,column:14},end:{line:125,column:19}},"76":{start:{line:126,column:20},end:{line:126,column:24}},"77":{start:{line:127,column:3},end:{line:134,column:4}},"78":{start:{line:129,column:4},end:{line:133,column:5}},"79":{start:{line:131,column:5},end:{line:131,column:17}},"80":{start:{line:132,column:5},end:{line:132,column:31}},"81":{start:{line:138,column:3},end:{line:139,column:52}},"82":{start:{line:138,column:12},end:{line:138,column:45}},"83":{start:{line:139,column:9},end:{line:139,column:51}},"84":{start:{line:146,column:0},end:{line:181,column:3}},"85":{start:{line:147,column:14},end:{line:147,column:30}},"86":{start:{line:148,column:16},end:{line:148,column:34}},"87":{start:{line:150,column:1},end:{line:180,column:2}},"88":{start:{line:152,column:2},end:{line:152,column:41}},"89":{start:{line:153,column:2},end:{line:153,column:9}},"90":{start:{line:155,column:6},end:{line:180,column:2}},"91":{start:{line:158,column:2},end:{line:165,column:4}},"92":{start:{line:162,column:4},end:{line:162,column:60}},"93":{start:{line:162,column:12},end:{line:162,column:51}},"94":{start:{line:162,column:52},end:{line:162,column:59}},"95":{start:{line:163,column:4},end:{line:163,column:33}},"96":{start:{line:169,column:2},end:{line:170,column:76}},"97":{start:{line:169,column:7},end:{line:169,column:29}},"98":{start:{line:170,column:14},end:{line:170,column:66}},"99":{start:{line:170,column:67},end:{line:170,column:74}},"100":{start:{line:172,column:2},end:{line:179,column:4}},"101":{start:{line:176,column:4},end:{line:176,column:60}},"102":{start:{line:176,column:12},end:{line:176,column:51}},"103":{start:{line:176,column:52},end:{line:176,column:59}},"104":{start:{line:177,column:4},end:{line:177,column:33}},"105":{start:{line:184,column:0},end:{line:194,column:3}},"106":{start:{line:185,column:1},end:{line:193,column:4}},"107":{start:{line:186,column:2},end:{line:186,column:58}},"108":{start:{line:186,column:10},end:{line:186,column:49}},"109":{start:{line:186,column:50},end:{line:186,column:57}},"110":{start:{line:187,column:18},end:{line:187,column:20}},"111":{start:{line:188,column:2},end:{line:191,column:3}},"112":{start:{line:190,column:3},end:{line:190,column:38}},"113":{start:{line:192,column:2},end:{line:192,column:22}},"114":{start:{line:214,column:0},end:{line:250,column:3}},"115":{start:{line:215,column:14},end:{line:215,column:30}},"116":{start:{line:216,column:18},end:{line:216,column:38}},"117":{start:{line:217,column:1},end:{line:249,column:2}},"118":{start:{line:219,column:2},end:{line:219,column:42}},"119":{start:{line:220,column:2},end:{line:220,column:9}},"120":{start:{line:224,column:2},end:{line:225,column:76}},"121":{start:{line:224,column:7},end:{line:224,column:29}},"122":{start:{line:225,column:14},end:{line:225,column:66}},"123":{start:{line:225,column:67},end:{line:225,column:74}},"124":{start:{line:227,column:14},end:{line:227,column:19}},"125":{start:{line:228,column:13},end:{line:228,column:78}},"126":{start:{line:229,column:2},end:{line:229,column:28}},"127":{start:{line:230,column:2},end:{line:230,column:34}},"128":{start:{line:231,column:2},end:{line:233,column:3}},"129":{start:{line:232,column:3},end:{line:232,column:16}},"130":{start:{line:235,column:2},end:{line:248,column:3}},"131":{start:{line:236,column:3},end:{line:236,column:49}},"132":{start:{line:239,column:3},end:{line:246,column:5}},"133":{start:{line:244,column:5},end:{line:244,column:61}},"134":{start:{line:244,column:13},end:{line:244,column:52}},"135":{start:{line:244,column:53},end:{line:244,column:60}},"136":{start:{line:247,column:3},end:{line:247,column:55}},"137":{start:{line:253,column:0},end:{line:274,column:3}},"138":{start:{line:254,column:14},end:{line:254,column:30}},"139":{start:{line:255,column:1},end:{line:273,column:2}},"140":{start:{line:257,column:2},end:{line:257,column:42}},"141":{start:{line:258,column:2},end:{line:258,column:9}},"142":{start:{line:262,column:2},end:{line:263,column:76}},"143":{start:{line:262,column:7},end:{line:262,column:29}},"144":{start:{line:263,column:14},end:{line:263,column:66}},"145":{start:{line:263,column:67},end:{line:263,column:74}},"146":{start:{line:265,column:2},end:{line:272,column:4}},"147":{start:{line:269,column:4},end:{line:269,column:60}},"148":{start:{line:269,column:12},end:{line:269,column:51}},"149":{start:{line:269,column:52},end:{line:269,column:59}},"150":{start:{line:270,column:4},end:{line:270,column:41}},"151":{start:{line:277,column:0},end:{line:304,column:3}},"152":{start:{line:278,column:14},end:{line:278,column:30}},"153":{start:{line:279,column:18},end:{line:279,column:38}},"154":{start:{line:280,column:16},end:{line:280,column:29}},"155":{start:{line:281,column:1},end:{line:303,column:2}},"156":{start:{line:283,column:2},end:{line:283,column:42}},"157":{start:{line:284,column:2},end:{line:284,column:9}},"158":{start:{line:288,column:2},end:{line:289,column:76}},"159":{start:{line:288,column:7},end:{line:288,column:29}},"160":{start:{line:289,column:14},end:{line:289,column:66}},"161":{start:{line:289,column:67},end:{line:289,column:74}},"162":{start:{line:292,column:22},end:{line:292,column:67}},"163":{start:{line:294,column:2},end:{line:301,column:4}},"164":{start:{line:299,column:4},end:{line:299,column:60}},"165":{start:{line:299,column:12},end:{line:299,column:51}},"166":{start:{line:299,column:52},end:{line:299,column:59}},"167":{start:{line:302,column:2},end:{line:302,column:75}},"168":{start:{line:334,column:2},end:{line:341,column:5}},"169":{start:{line:335,column:21},end:{line:335,column:41}},"170":{start:{line:337,column:3},end:{line:340,column:6}},"171":{start:{line:338,column:4},end:{line:338,column:60}},"172":{start:{line:338,column:12},end:{line:338,column:51}},"173":{start:{line:338,column:52},end:{line:338,column:59}},"174":{start:{line:339,column:4},end:{line:339,column:21}},"175":{start:{line:344,column:0},end:{line:346,column:3}},"176":{start:{line:345,column:1},end:{line:345,column:54}},"177":{start:{line:349,column:0},end:{line:349,column:13}},"178":{start:{line:351,column:0},end:{line:412,column:3}},"179":{start:{line:352,column:14},end:{line:352,column:43}},"180":{start:{line:353,column:18},end:{line:353,column:51}},"181":{start:{line:359,column:1},end:{line:363,column:2}},"182":{start:{line:361,column:2},end:{line:361,column:40}},"183":{start:{line:362,column:2},end:{line:362,column:49}},"184":{start:{line:365,column:14},end:{line:365,column:79}},"185":{start:{line:366,column:16},end:{line:366,column:80}},"186":{start:{line:368,column:1},end:{line:368,column:37}},"187":{start:{line:369,column:1},end:{line:369,column:41}},"188":{start:{line:370,column:17},end:{line:370,column:27}},"189":{start:{line:371,column:19},end:{line:371,column:31}},"190":{start:{line:375,column:1},end:{line:411,column:2}},"191":{start:{line:376,column:2},end:{line:376,column:51}},"192":{start:{line:379,column:2},end:{line:387,column:5}},"193":{start:{line:380,column:3},end:{line:380,column:52}},"194":{start:{line:381,column:3},end:{line:386,column:4}},"195":{start:{line:382,column:4},end:{line:382,column:89}},"196":{start:{line:383,column:4},end:{line:383,column:48}},"197":{start:{line:385,column:4},end:{line:385,column:36}},"198":{start:{line:390,column:2},end:{line:396,column:5}},"199":{start:{line:391,column:3},end:{line:391,column:50}},"200":{start:{line:392,column:3},end:{line:392,column:52}},"201":{start:{line:393,column:3},end:{line:395,column:4}},"202":{start:{line:394,column:4},end:{line:394,column:37}},"203":{start:{line:398,column:15},end:{line:398,column:54}},"204":{start:{line:399,column:2},end:{line:402,column:3}},"205":{start:{line:400,column:3},end:{line:400,column:35}},"206":{start:{line:401,column:3},end:{line:401,column:35}},"207":{start:{line:405,column:2},end:{line:405,column:91}},"208":{start:{line:406,column:2},end:{line:406,column:16}},"209":{start:{line:409,column:2},end:{line:409,column:40}},"210":{start:{line:410,column:2},end:{line:410,column:49}},"211":{start:{line:414,column:0},end:{line:426,column:3}},"212":{start:{line:416,column:1},end:{line:416,column:34}},"213":{start:{line:418,column:1},end:{line:421,column:4}},"214":{start:{line:419,column:2},end:{line:419,column:36}},"215":{start:{line:422,column:1},end:{line:425,column:4}},"216":{start:{line:424,column:2},end:{line:424,column:39}},"217":{start:{line:428,column:0},end:{line:428,column:21}},"218":{start:{line:429,column:0},end:{line:429,column:33}},"219":{start:{line:432,column:0},end:{line:434,column:3}},"220":{start:{line:433,column:1},end:{line:433,column:52}}},fnMap:{"0":{name:"connect",decl:{start:{line:19,column:9},end:{line:19,column:16}},loc:{start:{line:20,column:0},end:{line:58,column:1}},line:20},"1":{name:"(anonymous_1)",decl:{start:{line:21,column:26},end:{line:21,column:27}},loc:{start:{line:21,column:43},end:{line:57,column:2}},line:21},"2":{name:"(anonymous_2)",decl:{start:{line:28,column:32},end:{line:28,column:33}},loc:{start:{line:28,column:50},end:{line:30,column:3}},line:28},"3":{name:"(anonymous_3)",decl:{start:{line:35,column:20},end:{line:35,column:21}},loc:{start:{line:35,column:38},end:{line:55,column:4}},line:35},"4":{name:"(anonymous_4)",decl:{start:{line:39,column:50},end:{line:39,column:51}},loc:{start:{line:39,column:63},end:{line:42,column:5}},line:39},"5":{name:"(anonymous_5)",decl:{start:{line:45,column:50},end:{line:45,column:51}},loc:{start:{line:45,column:63},end:{line:48,column:5}},line:45},"6":{name:"(anonymous_6)",decl:{start:{line:51,column:50},end:{line:51,column:51}},loc:{start:{line:51,column:63},end:{line:54,column:5}},line:51},"7":{name:"(anonymous_7)",decl:{start:{line:72,column:21},end:{line:72,column:22}},loc:{start:{line:72,column:40},end:{line:109,column:1}},line:72},"8":{name:"(anonymous_8)",decl:{start:{line:84,column:43},end:{line:84,column:44}},loc:{start:{line:84,column:64},end:{line:107,column:3}},line:84},"9":{name:"(anonymous_9)",decl:{start:{line:102,column:49},end:{line:102,column:50}},loc:{start:{line:102,column:62},end:{line:105,column:5}},line:102},"10":{name:"(anonymous_10)",decl:{start:{line:112,column:25},end:{line:112,column:26}},loc:{start:{line:112,column:43},end:{line:142,column:1}},line:112},"11":{name:"(anonymous_11)",decl:{start:{line:122,column:43},end:{line:122,column:44}},loc:{start:{line:122,column:64},end:{line:140,column:3}},line:122},"12":{name:"(anonymous_12)",decl:{start:{line:146,column:20},end:{line:146,column:21}},loc:{start:{line:146,column:38},end:{line:181,column:1}},line:146},"13":{name:"(anonymous_13)",decl:{start:{line:160,column:3},end:{line:160,column:4}},loc:{start:{line:161,column:3},end:{line:164,column:4}},line:161},"14":{name:"(anonymous_14)",decl:{start:{line:174,column:3},end:{line:174,column:4}},loc:{start:{line:175,column:3},end:{line:178,column:4}},line:175},"15":{name:"(anonymous_15)",decl:{start:{line:184,column:28},end:{line:184,column:29}},loc:{start:{line:184,column:46},end:{line:194,column:1}},line:184},"16":{name:"(anonymous_16)",decl:{start:{line:185,column:42},end:{line:185,column:43}},loc:{start:{line:185,column:63},end:{line:193,column:2}},line:185},"17":{name:"(anonymous_17)",decl:{start:{line:214,column:22},end:{line:214,column:23}},loc:{start:{line:214,column:46},end:{line:250,column:1}},line:214},"18":{name:"(anonymous_18)",decl:{start:{line:242,column:4},end:{line:242,column:5}},loc:{start:{line:243,column:4},end:{line:245,column:5}},line:243},"19":{name:"(anonymous_19)",decl:{start:{line:253,column:23},end:{line:253,column:24}},loc:{start:{line:253,column:41},end:{line:274,column:1}},line:253},"20":{name:"(anonymous_20)",decl:{start:{line:267,column:3},end:{line:267,column:4}},loc:{start:{line:268,column:3},end:{line:271,column:4}},line:268},"21":{name:"(anonymous_21)",decl:{start:{line:277,column:23},end:{line:277,column:24}},loc:{start:{line:277,column:41},end:{line:304,column:1}},line:277},"22":{name:"(anonymous_22)",decl:{start:{line:297,column:3},end:{line:297,column:4}},loc:{start:{line:298,column:3},end:{line:300,column:4}},line:298},"23":{name:"(anonymous_23)",decl:{start:{line:334,column:18},end:{line:334,column:19}},loc:{start:{line:334,column:37},end:{line:341,column:3}},line:334},"24":{name:"(anonymous_24)",decl:{start:{line:337,column:48},end:{line:337,column:49}},loc:{start:{line:337,column:69},end:{line:340,column:4}},line:337},"25":{name:"(anonymous_25)",decl:{start:{line:344,column:8},end:{line:344,column:9}},loc:{start:{line:344,column:33},end:{line:346,column:1}},line:344},"26":{name:"(anonymous_26)",decl:{start:{line:351,column:7},end:{line:351,column:8}},loc:{start:{line:351,column:35},end:{line:412,column:1}},line:351},"27":{name:"(anonymous_27)",decl:{start:{line:379,column:36},end:{line:379,column:37}},loc:{start:{line:379,column:49},end:{line:387,column:3}},line:379},"28":{name:"(anonymous_28)",decl:{start:{line:390,column:26},end:{line:390,column:27}},loc:{start:{line:390,column:36},end:{line:396,column:3}},line:390},"29":{name:"(anonymous_29)",decl:{start:{line:414,column:28},end:{line:414,column:29}},loc:{start:{line:414,column:44},end:{line:426,column:1}},line:414},"30":{name:"(anonymous_30)",decl:{start:{line:418,column:25},end:{line:418,column:26}},loc:{start:{line:418,column:35},end:{line:421,column:2}},line:418},"31":{name:"(anonymous_31)",decl:{start:{line:422,column:27},end:{line:422,column:28}},loc:{start:{line:422,column:41},end:{line:425,column:2}},line:422},"32":{name:"(anonymous_32)",decl:{start:{line:432,column:20},end:{line:432,column:21}},loc:{start:{line:432,column:30},end:{line:434,column:1}},line:432}},branchMap:{"0":{loc:{start:{line:22,column:2},end:{line:22,column:20}},type:"if",locations:[{start:{line:22,column:2},end:{line:22,column:20}},{start:{line:22,column:2},end:{line:22,column:20}}],line:22},"1":{loc:{start:{line:29,column:3},end:{line:29,column:21}},type:"if",locations:[{start:{line:29,column:3},end:{line:29,column:21}},{start:{line:29,column:3},end:{line:29,column:21}}],line:29},"2":{loc:{start:{line:32,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:32,column:2},end:{line:56,column:3}},{start:{line:32,column:2},end:{line:56,column:3}}],line:32},"3":{loc:{start:{line:36,column:4},end:{line:36,column:22}},type:"if",locations:[{start:{line:36,column:4},end:{line:36,column:22}},{start:{line:36,column:4},end:{line:36,column:22}}],line:36},"4":{loc:{start:{line:40,column:5},end:{line:40,column:23}},type:"if",locations:[{start:{line:40,column:5},end:{line:40,column:23}},{start:{line:40,column:5},end:{line:40,column:23}}],line:40},"5":{loc:{start:{line:46,column:5},end:{line:46,column:23}},type:"if",locations:[{start:{line:46,column:5},end:{line:46,column:23}},{start:{line:46,column:5},end:{line:46,column:23}}],line:46},"6":{loc:{start:{line:52,column:5},end:{line:52,column:23}},type:"if",locations:[{start:{line:52,column:5},end:{line:52,column:23}},{start:{line:52,column:5},end:{line:52,column:23}}],line:52},"7":{loc:{start:{line:75,column:1},end:{line:108,column:2}},type:"if",locations:[{start:{line:75,column:1},end:{line:108,column:2}},{start:{line:75,column:1},end:{line:108,column:2}}],line:75},"8":{loc:{start:{line:75,column:4},end:{line:75,column:80}},type:"binary-expr",locations:[{start:{line:75,column:4},end:{line:75,column:21}},{start:{line:75,column:25},end:{line:75,column:42}},{start:{line:75,column:46},end:{line:75,column:61}},{start:{line:75,column:65},end:{line:75,column:80}}],line:75},"9":{loc:{start:{line:85,column:3},end:{line:85,column:59}},type:"if",locations:[{start:{line:85,column:3},end:{line:85,column:59}},{start:{line:85,column:3},end:{line:85,column:59}}],line:85},"10":{loc:{start:{line:91,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:94,column:5}},{start:{line:91,column:4},end:{line:94,column:5}}],line:91},"11":{loc:{start:{line:96,column:3},end:{line:106,column:4}},type:"if",locations:[{start:{line:96,column:3},end:{line:106,column:4}},{start:{line:96,column:3},end:{line:106,column:4}}],line:96},"12":{loc:{start:{line:103,column:5},end:{line:103,column:61}},type:"if",locations:[{start:{line:103,column:5},end:{line:103,column:61}},{start:{line:103,column:5},end:{line:103,column:61}}],line:103},"13":{loc:{start:{line:115,column:1},end:{line:141,column:2}},type:"if",locations:[{start:{line:115,column:1},end:{line:141,column:2}},{start:{line:115,column:1},end:{line:141,column:2}}],line:115},"14":{loc:{start:{line:115,column:4},end:{line:115,column:80}},type:"binary-expr",locations:[{start:{line:115,column:4},end:{line:115,column:21}},{start:{line:115,column:25},end:{line:115,column:42}},{start:{line:115,column:46},end:{line:115,column:61}},{start:{line:115,column:65},end:{line:115,column:80}}],line:115},"15":{loc:{start:{line:123,column:3},end:{line:123,column:59}},type:"if",locations:[{start:{line:123,column:3},end:{line:123,column:59}},{start:{line:123,column:3},end:{line:123,column:59}}],line:123},"16":{loc:{start:{line:129,column:4},end:{line:133,column:5}},type:"if",locations:[{start:{line:129,column:4},end:{line:133,column:5}},{start:{line:129,column:4},end:{line:133,column:5}}],line:129},"17":{loc:{start:{line:129,column:7},end:{line:129,column:71}},type:"binary-expr",locations:[{start:{line:129,column:7},end:{line:129,column:37}},{start:{line:129,column:41},end:{line:129,column:71}}],line:129},"18":{loc:{start:{line:138,column:3},end:{line:139,column:52}},type:"if",locations:[{start:{line:138,column:3},end:{line:139,column:52}},{start:{line:138,column:3},end:{line:139,column:52}}],line:138},"19":{loc:{start:{line:150,column:1},end:{line:180,column:2}},type:"if",locations:[{start:{line:150,column:1},end:{line:180,column:2}},{start:{line:150,column:1},end:{line:180,column:2}}],line:150},"20":{loc:{start:{line:150,column:4},end:{line:150,column:38}},type:"binary-expr",locations:[{start:{line:150,column:4},end:{line:150,column:18}},{start:{line:150,column:22},end:{line:150,column:38}}],line:150},"21":{loc:{start:{line:155,column:6},end:{line:180,column:2}},type:"if",locations:[{start:{line:155,column:6},end:{line:180,column:2}},{start:{line:155,column:6},end:{line:180,column:2}}],line:155},"22":{loc:{start:{line:155,column:9},end:{line:155,column:43}},type:"binary-expr",locations:[{start:{line:155,column:9},end:{line:155,column:23}},{start:{line:155,column:27},end:{line:155,column:43}}],line:155},"23":{loc:{start:{line:162,column:4},end:{line:162,column:60}},type:"if",locations:[{start:{line:162,column:4},end:{line:162,column:60}},{start:{line:162,column:4},end:{line:162,column:60}}],line:162},"24":{loc:{start:{line:176,column:4},end:{line:176,column:60}},type:"if",locations:[{start:{line:176,column:4},end:{line:176,column:60}},{start:{line:176,column:4},end:{line:176,column:60}}],line:176},"25":{loc:{start:{line:186,column:2},end:{line:186,column:58}},type:"if",locations:[{start:{line:186,column:2},end:{line:186,column:58}},{start:{line:186,column:2},end:{line:186,column:58}}],line:186},"26":{loc:{start:{line:217,column:1},end:{line:249,column:2}},type:"if",locations:[{start:{line:217,column:1},end:{line:249,column:2}},{start:{line:217,column:1},end:{line:249,column:2}}],line:217},"27":{loc:{start:{line:217,column:4},end:{line:217,column:76}},type:"binary-expr",locations:[{start:{line:217,column:4},end:{line:217,column:18}},{start:{line:217,column:22},end:{line:217,column:40}},{start:{line:217,column:44},end:{line:217,column:56}},{start:{line:217,column:60},end:{line:217,column:76}}],line:217},"28":{loc:{start:{line:231,column:2},end:{line:233,column:3}},type:"if",locations:[{start:{line:231,column:2},end:{line:233,column:3}},{start:{line:231,column:2},end:{line:233,column:3}}],line:231},"29":{loc:{start:{line:235,column:2},end:{line:248,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:248,column:3}},{start:{line:235,column:2},end:{line:248,column:3}}],line:235},"30":{loc:{start:{line:244,column:5},end:{line:244,column:61}},type:"if",locations:[{start:{line:244,column:5},end:{line:244,column:61}},{start:{line:244,column:5},end:{line:244,column:61}}],line:244},"31":{loc:{start:{line:255,column:1},end:{line:273,column:2}},type:"if",locations:[{start:{line:255,column:1},end:{line:273,column:2}},{start:{line:255,column:1},end:{line:273,column:2}}],line:255},"32":{loc:{start:{line:269,column:4},end:{line:269,column:60}},type:"if",locations:[{start:{line:269,column:4},end:{line:269,column:60}},{start:{line:269,column:4},end:{line:269,column:60}}],line:269},"33":{loc:{start:{line:281,column:1},end:{line:303,column:2}},type:"if",locations:[{start:{line:281,column:1},end:{line:303,column:2}},{start:{line:281,column:1},end:{line:303,column:2}}],line:281},"34":{loc:{start:{line:281,column:4},end:{line:281,column:139}},type:"binary-expr",locations:[{start:{line:281,column:4},end:{line:281,column:18}},{start:{line:281,column:22},end:{line:281,column:40}},{start:{line:281,column:44},end:{line:281,column:60}},{start:{line:281,column:64},end:{line:281,column:76}},{start:{line:281,column:80},end:{line:281,column:96}},{start:{line:281,column:100},end:{line:281,column:114}},{start:{line:281,column:118},end:{line:281,column:139}}],line:281},"35":{loc:{start:{line:299,column:4},end:{line:299,column:60}},type:"if",locations:[{start:{line:299,column:4},end:{line:299,column:60}},{start:{line:299,column:4},end:{line:299,column:60}}],line:299},"36":{loc:{start:{line:338,column:4},end:{line:338,column:60}},type:"if",locations:[{start:{line:338,column:4},end:{line:338,column:60}},{start:{line:338,column:4},end:{line:338,column:60}}],line:338},"37":{loc:{start:{line:359,column:1},end:{line:363,column:2}},type:"if",locations:[{start:{line:359,column:1},end:{line:363,column:2}},{start:{line:359,column:1},end:{line:363,column:2}}],line:359},"38":{loc:{start:{line:359,column:4},end:{line:359,column:76}},type:"binary-expr",locations:[{start:{line:359,column:4},end:{line:359,column:18}},{start:{line:359,column:22},end:{line:359,column:34}},{start:{line:359,column:38},end:{line:359,column:56}},{start:{line:359,column:60},end:{line:359,column:76}}],line:359},"39":{loc:{start:{line:375,column:1},end:{line:411,column:2}},type:"if",locations:[{start:{line:375,column:1},end:{line:411,column:2}},{start:{line:375,column:1},end:{line:411,column:2}}],line:375},"40":{loc:{start:{line:375,column:5},end:{line:375,column:39}},type:"binary-expr",locations:[{start:{line:375,column:5},end:{line:375,column:19}},{start:{line:375,column:23},end:{line:375,column:39}}],line:375},"41":{loc:{start:{line:381,column:3},end:{line:386,column:4}},type:"if",locations:[{start:{line:381,column:3},end:{line:386,column:4}},{start:{line:381,column:3},end:{line:386,column:4}}],line:381},"42":{loc:{start:{line:393,column:3},end:{line:395,column:4}},type:"if",locations:[{start:{line:393,column:3},end:{line:395,column:4}},{start:{line:393,column:3},end:{line:395,column:4}}],line:393},"43":{loc:{start:{line:399,column:2},end:{line:402,column:3}},type:"if",locations:[{start:{line:399,column:2},end:{line:402,column:3}},{start:{line:399,column:2},end:{line:402,column:3}}],line:399}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0,0,0,0,0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0,0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const express=(cov_1l82dguaqr.s[0]++,require('express'));const app=(cov_1l82dguaqr.s[1]++,express());const cors=(cov_1l82dguaqr.s[2]++,require('cors'));cov_1l82dguaqr.s[3]++;app.use(cors());cov_1l82dguaqr.s[4]++;app.options("*",cors());const server=(cov_1l82dguaqr.s[5]++,require('http').createServer(app));const io=(cov_1l82dguaqr.s[6]++,require('socket.io')(server));var path=(cov_1l82dguaqr.s[7]++,require("path"));// Create mongo db
var MongoClient=(cov_1l82dguaqr.s[8]++,require('mongodb').MongoClient);var url=(cov_1l82dguaqr.s[9]++,"mongodb://localhost:27017/mydb");var ObjectID=(cov_1l82dguaqr.s[10]++,require('mongodb').ObjectID);// Need to start Mongod before you're able to connect
function connect(dbName,testDB){cov_1l82dguaqr.f[0]++;cov_1l82dguaqr.s[11]++;MongoClient.connect(url,function(err,db){cov_1l82dguaqr.f[1]++;cov_1l82dguaqr.s[12]++;if(err){cov_1l82dguaqr.b[0][0]++;cov_1l82dguaqr.s[13]++;throw err;}else{cov_1l82dguaqr.b[0][1]++;}// Global variable, come at me
cov_1l82dguaqr.s[14]++;dbo=db.db(dbName);// Initialize collections
cov_1l82dguaqr.s[15]++;dbo.createCollection("users",function(err,res){cov_1l82dguaqr.f[2]++;cov_1l82dguaqr.s[16]++;if(err){cov_1l82dguaqr.b[1][0]++;cov_1l82dguaqr.s[17]++;throw err;}else{cov_1l82dguaqr.b[1][1]++;}});cov_1l82dguaqr.s[18]++;if(testDB){cov_1l82dguaqr.b[2][0]++;cov_1l82dguaqr.s[19]++;dbo.dropDatabase(function(err,res){cov_1l82dguaqr.f[3]++;cov_1l82dguaqr.s[20]++;if(err){cov_1l82dguaqr.b[3][0]++;cov_1l82dguaqr.s[21]++;throw err;}else{cov_1l82dguaqr.b[3][1]++;}cov_1l82dguaqr.s[22]++;console.log("DROPPED DATABASE");var usrObject1=(cov_1l82dguaqr.s[23]++,{username:"testUser",password:"hejsan",messages:[],friends:[]});cov_1l82dguaqr.s[24]++;dbo.collection("users").insertOne(usrObject1,function(err){cov_1l82dguaqr.f[4]++;cov_1l82dguaqr.s[25]++;if(err){cov_1l82dguaqr.b[4][0]++;cov_1l82dguaqr.s[26]++;throw err;}else{cov_1l82dguaqr.b[4][1]++;}cov_1l82dguaqr.s[27]++;console.log("ADDED TEST USER #1");});var usrObject2=(cov_1l82dguaqr.s[28]++,{username:"Billiam",password:"123",messages:[],friends:[]});cov_1l82dguaqr.s[29]++;dbo.collection("users").insertOne(usrObject2,function(err){cov_1l82dguaqr.f[5]++;cov_1l82dguaqr.s[30]++;if(err){cov_1l82dguaqr.b[5][0]++;cov_1l82dguaqr.s[31]++;throw err;}else{cov_1l82dguaqr.b[5][1]++;}cov_1l82dguaqr.s[32]++;console.log("ADDED TEST USER #2");});var usrObject3=(cov_1l82dguaqr.s[33]++,{username:"Banton",password:"123",messages:[],friends:[]});cov_1l82dguaqr.s[34]++;dbo.collection("users").insertOne(usrObject3,function(err){cov_1l82dguaqr.f[6]++;cov_1l82dguaqr.s[35]++;if(err){cov_1l82dguaqr.b[6][0]++;cov_1l82dguaqr.s[36]++;throw err;}else{cov_1l82dguaqr.b[6][1]++;}cov_1l82dguaqr.s[37]++;console.log("ADDED TEST USER #3");});});}else{cov_1l82dguaqr.b[2][1]++;}});}// Connect and do not wipe
//connect("finalProjectDB", false);
cov_1l82dguaqr.s[38]++;connect("testDB",true);// - - - - - - - - - - - - - - - HTML5 PAGES - - - - - - - - - - - - - - - - - -
cov_1l82dguaqr.s[39]++;app.use(express.static("public"));cov_1l82dguaqr.s[40]++;app.use("/external",express.static("external"));// - - - - - - - - - - - - - - - AJAX DATA- - - - - - - - - - - - - - - - - - -
// http://localhost:3000/register?username=Banton&password=hejsan
cov_1l82dguaqr.s[41]++;app.get('/register',function(req,res){cov_1l82dguaqr.f[7]++;var _username=(cov_1l82dguaqr.s[42]++,req.query.username);var _password=(cov_1l82dguaqr.s[43]++,req.query.password);cov_1l82dguaqr.s[44]++;if((cov_1l82dguaqr.b[8][0]++,_username==null)||(cov_1l82dguaqr.b[8][1]++,_password==null)||(cov_1l82dguaqr.b[8][2]++,_username=="")||(cov_1l82dguaqr.b[8][3]++,_password=="")){cov_1l82dguaqr.b[7][0]++;cov_1l82dguaqr.s[45]++;res.status(400).send("Bad parameters.");cov_1l82dguaqr.s[46]++;return;}else{cov_1l82dguaqr.b[7][1]++;var usrObject=(cov_1l82dguaqr.s[47]++,{username:_username,password:_password,messages:[],friends:[]});cov_1l82dguaqr.s[48]++;dbo.collection("users").find({}).toArray(function(err,result){cov_1l82dguaqr.f[8]++;cov_1l82dguaqr.s[49]++;if(err){cov_1l82dguaqr.b[9][0]++;cov_1l82dguaqr.s[50]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[51]++;return;}else{cov_1l82dguaqr.b[9][1]++;}var users=(cov_1l82dguaqr.s[52]++,result);var failed=(cov_1l82dguaqr.s[53]++,false);// If the user exists already, fail.
cov_1l82dguaqr.s[54]++;for(var i=0;i<users.length;i++){cov_1l82dguaqr.s[55]++;if(users[i].username==_username){cov_1l82dguaqr.b[10][0]++;cov_1l82dguaqr.s[56]++;failed=true;}else{cov_1l82dguaqr.b[10][1]++;}}cov_1l82dguaqr.s[57]++;if(failed){cov_1l82dguaqr.b[11][0]++;cov_1l82dguaqr.s[58]++;res.status(406).send("Failed. Username "+_username+" already exists.");}else{cov_1l82dguaqr.b[11][1]++;cov_1l82dguaqr.s[59]++;dbo.collection("users").insertOne(usrObject,function(err){cov_1l82dguaqr.f[9]++;cov_1l82dguaqr.s[60]++;if(err){cov_1l82dguaqr.b[12][0]++;cov_1l82dguaqr.s[61]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[62]++;return;}else{cov_1l82dguaqr.b[12][1]++;}cov_1l82dguaqr.s[63]++;res.status(200).send("Successfully registered "+_username+" with password "+_password);});}});}});// http://localhost:3000/authenticate?username=Banton&password=hejsan
cov_1l82dguaqr.s[64]++;app.get('/authenticate',function(req,res){cov_1l82dguaqr.f[10]++;var _username=(cov_1l82dguaqr.s[65]++,req.query.username);var _password=(cov_1l82dguaqr.s[66]++,req.query.password);cov_1l82dguaqr.s[67]++;if((cov_1l82dguaqr.b[14][0]++,_username==null)||(cov_1l82dguaqr.b[14][1]++,_password==null)||(cov_1l82dguaqr.b[14][2]++,_username=="")||(cov_1l82dguaqr.b[14][3]++,_password=="")){cov_1l82dguaqr.b[13][0]++;cov_1l82dguaqr.s[68]++;res.status(400).send("Bad parameters.");cov_1l82dguaqr.s[69]++;return;}else{cov_1l82dguaqr.b[13][1]++;cov_1l82dguaqr.s[70]++;dbo.collection("users").find({}).toArray(function(err,result){cov_1l82dguaqr.f[11]++;cov_1l82dguaqr.s[71]++;if(err){cov_1l82dguaqr.b[15][0]++;cov_1l82dguaqr.s[72]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[73]++;return;}else{cov_1l82dguaqr.b[15][1]++;}var users=(cov_1l82dguaqr.s[74]++,result);var auth=(cov_1l82dguaqr.s[75]++,false);var matchingID=(cov_1l82dguaqr.s[76]++,null);cov_1l82dguaqr.s[77]++;for(var i=0;i<users.length;i++){cov_1l82dguaqr.s[78]++;if((cov_1l82dguaqr.b[17][0]++,users[i].username==_username)&&(cov_1l82dguaqr.b[17][1]++,users[i].password==_password)){cov_1l82dguaqr.b[16][0]++;cov_1l82dguaqr.s[79]++;auth=true;cov_1l82dguaqr.s[80]++;matchingID=users[i]._id;}else{cov_1l82dguaqr.b[16][1]++;}}// The users ID should be used for a browser cookie.
// When the user has the cookie set, he can load his profile page using it.
// When the user presses log out, clear the cookie.
cov_1l82dguaqr.s[81]++;if(auth){cov_1l82dguaqr.b[18][0]++;cov_1l82dguaqr.s[82]++;res.status(200).send(matchingID);}else{cov_1l82dguaqr.b[18][1]++;cov_1l82dguaqr.s[83]++;res.status(406).send("Not authenticated");}});}});// http://localhost:3000/getUser?userID=5bb4b1de325b620dc485fd1b
// http://localhost:3000/getUser?username=Banton
cov_1l82dguaqr.s[84]++;app.get('/getUser',function(req,res){cov_1l82dguaqr.f[12]++;var userID=(cov_1l82dguaqr.s[85]++,req.query.userID);var username=(cov_1l82dguaqr.s[86]++,req.query.username);cov_1l82dguaqr.s[87]++;if((cov_1l82dguaqr.b[20][0]++,userID==null)&&(cov_1l82dguaqr.b[20][1]++,username==null)){cov_1l82dguaqr.b[19][0]++;cov_1l82dguaqr.s[88]++;res.status(400).send("Bad parameters");cov_1l82dguaqr.s[89]++;return;}else{cov_1l82dguaqr.b[19][1]++;cov_1l82dguaqr.s[90]++;if((cov_1l82dguaqr.b[22][0]++,username!="")&&(cov_1l82dguaqr.b[22][1]++,username!=null)){cov_1l82dguaqr.b[21][0]++;cov_1l82dguaqr.s[91]++;// Find based on username
dbo.collection("users").findOne({"username":username},function(err,result){cov_1l82dguaqr.f[13]++;cov_1l82dguaqr.s[92]++;if(err){cov_1l82dguaqr.b[23][0]++;cov_1l82dguaqr.s[93]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[94]++;return;}else{cov_1l82dguaqr.b[23][1]++;}cov_1l82dguaqr.s[95]++;res.status(200).send(result);});}else{cov_1l82dguaqr.b[21][1]++;cov_1l82dguaqr.s[96]++;try{cov_1l82dguaqr.s[97]++;id=ObjectID(userID);}catch(err){cov_1l82dguaqr.s[98]++;res.status(400).send("Bad parameters, invalid ID.");cov_1l82dguaqr.s[99]++;return;}cov_1l82dguaqr.s[100]++;dbo.collection("users").findOne({"_id":ObjectID(userID)},function(err,result){cov_1l82dguaqr.f[14]++;cov_1l82dguaqr.s[101]++;if(err){cov_1l82dguaqr.b[24][0]++;cov_1l82dguaqr.s[102]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[103]++;return;}else{cov_1l82dguaqr.b[24][1]++;}cov_1l82dguaqr.s[104]++;res.status(200).send(result);});}}});// http://localhost:3000/getAllUsernames
cov_1l82dguaqr.s[105]++;app.get('/getAllUsernames',function(req,res){cov_1l82dguaqr.f[15]++;cov_1l82dguaqr.s[106]++;dbo.collection("users").find({}).toArray(function(err,result){cov_1l82dguaqr.f[16]++;cov_1l82dguaqr.s[107]++;if(err){cov_1l82dguaqr.b[25][0]++;cov_1l82dguaqr.s[108]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[109]++;return;}else{cov_1l82dguaqr.b[25][1]++;}var usernames=(cov_1l82dguaqr.s[110]++,[]);cov_1l82dguaqr.s[111]++;for(var i=0;i<result.length;i++){cov_1l82dguaqr.s[112]++;usernames.push(result[i].username);}cov_1l82dguaqr.s[113]++;res.send(usernames);});});/*
// IDEA (untested)
// http://localhost:3000/searchUsers?name=Bill
app.get('/searchUsers', function(req, res){
	var name = req.query.name;
	dbo.collection("users").find({ "username": { $regex: name } }).toArray(function(err, result){
		if(err){res.status(500).send("Unkown error."); return;}
		var usernames = [];
		for(var i = 0; i < result.length; i++)
		{
			usernames.push(result[i].username);
		}
		res.send(usernames);
	});
});
*/ // http://localhost:3000/addFriend?userID=5bb214bee3bb932ce8e09777&friendName=Billiam
cov_1l82dguaqr.s[114]++;app.get('/addFriend',async function(req,res){cov_1l82dguaqr.f[17]++;var userID=(cov_1l82dguaqr.s[115]++,req.query.userID);var friendName=(cov_1l82dguaqr.s[116]++,req.query.friendName);cov_1l82dguaqr.s[117]++;if((cov_1l82dguaqr.b[27][0]++,userID==null)||(cov_1l82dguaqr.b[27][1]++,friendName==null)||(cov_1l82dguaqr.b[27][2]++,userID=="")||(cov_1l82dguaqr.b[27][3]++,friendName=="")){cov_1l82dguaqr.b[26][0]++;cov_1l82dguaqr.s[118]++;res.status(400).send("Bad parameters.");cov_1l82dguaqr.s[119]++;return;}else{cov_1l82dguaqr.b[26][1]++;cov_1l82dguaqr.s[120]++;try{cov_1l82dguaqr.s[121]++;id=ObjectID(userID);}catch(err){cov_1l82dguaqr.s[122]++;res.status(400).send("Bad parameters, invalid ID.");cov_1l82dguaqr.s[123]++;return;}var found=(cov_1l82dguaqr.s[124]++,false);var user=(cov_1l82dguaqr.s[125]++,await dbo.collection("users").findOne({"_id":ObjectID(userID)}));cov_1l82dguaqr.s[126]++;friends=user["friends"];cov_1l82dguaqr.s[127]++;i=friends.indexOf(friendName);cov_1l82dguaqr.s[128]++;if(i!=-1){cov_1l82dguaqr.b[28][0]++;cov_1l82dguaqr.s[129]++;found=true;}else{cov_1l82dguaqr.b[28][1]++;}cov_1l82dguaqr.s[130]++;if(found){cov_1l82dguaqr.b[29][0]++;cov_1l82dguaqr.s[131]++;res.status(200).send("Friend already added.");}else{cov_1l82dguaqr.b[29][1]++;cov_1l82dguaqr.s[132]++;dbo.collection("users").updateOne({"_id":ObjectID(userID)},{$addToSet:{"friends":friendName}},function(err,res){cov_1l82dguaqr.f[18]++;cov_1l82dguaqr.s[133]++;if(err){cov_1l82dguaqr.b[30][0]++;cov_1l82dguaqr.s[134]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[135]++;return;}else{cov_1l82dguaqr.b[30][1]++;}});cov_1l82dguaqr.s[136]++;res.status(200).send("Added friend: "+friendName);}}});// http://localhost:3000/getFriends?userID=5bb214bee3bb932ce8e09777
cov_1l82dguaqr.s[137]++;app.get('/getFriends',function(req,res){cov_1l82dguaqr.f[19]++;var userID=(cov_1l82dguaqr.s[138]++,req.query.userID);cov_1l82dguaqr.s[139]++;if(userID==null){cov_1l82dguaqr.b[31][0]++;cov_1l82dguaqr.s[140]++;res.status(400).send("Bad parameters.");cov_1l82dguaqr.s[141]++;return;}else{cov_1l82dguaqr.b[31][1]++;cov_1l82dguaqr.s[142]++;try{cov_1l82dguaqr.s[143]++;id=ObjectID(userID);}catch(err){cov_1l82dguaqr.s[144]++;res.status(400).send("Bad parameters, invalid ID.");cov_1l82dguaqr.s[145]++;return;}cov_1l82dguaqr.s[146]++;dbo.collection("users").findOne({"_id":ObjectID(userID)},function(err,result){cov_1l82dguaqr.f[20]++;cov_1l82dguaqr.s[147]++;if(err){cov_1l82dguaqr.b[32][0]++;cov_1l82dguaqr.s[148]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[149]++;return;}else{cov_1l82dguaqr.b[32][1]++;}cov_1l82dguaqr.s[150]++;res.status(200).send(result.friends);});}});// http://localhost:3000/addMessage?userID=5bb214bee3bb932ce8e09777&friendName=Billiam&msg=Usux
cov_1l82dguaqr.s[151]++;app.get('/addMessage',function(req,res){cov_1l82dguaqr.f[21]++;var userID=(cov_1l82dguaqr.s[152]++,req.query.userID);var friendName=(cov_1l82dguaqr.s[153]++,req.query.friendName);var _message=(cov_1l82dguaqr.s[154]++,req.query.msg);cov_1l82dguaqr.s[155]++;if((cov_1l82dguaqr.b[34][0]++,userID==null)||(cov_1l82dguaqr.b[34][1]++,friendName==null)||(cov_1l82dguaqr.b[34][2]++,_message==null)||(cov_1l82dguaqr.b[34][3]++,userID=="")||(cov_1l82dguaqr.b[34][4]++,friendName=="")||(cov_1l82dguaqr.b[34][5]++,_message=="")||(cov_1l82dguaqr.b[34][6]++,_message.length>140)){cov_1l82dguaqr.b[33][0]++;cov_1l82dguaqr.s[156]++;res.status(400).send("Bad parameters.");cov_1l82dguaqr.s[157]++;return;}else{cov_1l82dguaqr.b[33][1]++;cov_1l82dguaqr.s[158]++;try{cov_1l82dguaqr.s[159]++;id=ObjectID(userID);}catch(err){cov_1l82dguaqr.s[160]++;res.status(400).send("Bad parameters, invalid ID.");cov_1l82dguaqr.s[161]++;return;}// The posted message
var messageObject=(cov_1l82dguaqr.s[162]++,{message:_message,user:ObjectID(userID)});cov_1l82dguaqr.s[163]++;dbo.collection("users").updateOne({"username":friendName},{$addToSet:{"messages":messageObject}},function(err,res){cov_1l82dguaqr.f[22]++;cov_1l82dguaqr.s[164]++;if(err){cov_1l82dguaqr.b[35][0]++;cov_1l82dguaqr.s[165]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[166]++;return;}else{cov_1l82dguaqr.b[35][1]++;}});cov_1l82dguaqr.s[167]++;res.status(200).send("Added message: "+_message+" to "+friendName);}});// http://localhost:3000/addMessage?friendName=Billiam
/*
app.get('/privateChat', function(req, res){
	var friendName = req.query.friendName;

	if(friendName == null || friendName == "")
	{
		res.status(400).send("Bad parameters.");
		return;
	}
	else
	{
		// Find based on username
		dbo.collection("users").findOne(
			{"username" : friendName},
			function(err, result)
			{
				if(err){res.status(400).send("Database error"); return;}
				if(result){console.log(result); res.status(200).send(result);}
				else{res.status(404).send("No such user.");}
			}
		);
	}
});
*/ // Debug thing to view a particular collection and it's data.
// http://localhost:3000/get?collection=users
cov_1l82dguaqr.s[168]++;app.get('/get',function(req,res){cov_1l82dguaqr.f[23]++;var _collection=(cov_1l82dguaqr.s[169]++,req.query.collection);cov_1l82dguaqr.s[170]++;dbo.collection(_collection).find({}).toArray(function(err,result){cov_1l82dguaqr.f[24]++;cov_1l82dguaqr.s[171]++;if(err){cov_1l82dguaqr.b[36][0]++;cov_1l82dguaqr.s[172]++;res.status(500).send("Unknown error.");cov_1l82dguaqr.s[173]++;return;}else{cov_1l82dguaqr.b[36][1]++;}cov_1l82dguaqr.s[174]++;res.send(result);});});// 404 handler if no other subpages matched
cov_1l82dguaqr.s[175]++;app.use(function(req,res,next){cov_1l82dguaqr.f[25]++;cov_1l82dguaqr.s[176]++;res.status(404).send("404, no matching page found.");});// Chat functionality
cov_1l82dguaqr.s[177]++;clients={};cov_1l82dguaqr.s[178]++;io.use(async function(socket,next){cov_1l82dguaqr.f[26]++;var userID=(cov_1l82dguaqr.s[179]++,socket.handshake.query.userID);var friendName=(cov_1l82dguaqr.s[180]++,socket.handshake.query.friendName);//console.log("userID: ", userID);
//console.log("friendName: ", friendName);
// call next() with an Error if you need to reject the connection.
cov_1l82dguaqr.s[181]++;if((cov_1l82dguaqr.b[38][0]++,userID==null)||(cov_1l82dguaqr.b[38][1]++,userID=="")||(cov_1l82dguaqr.b[38][2]++,friendName==null)||(cov_1l82dguaqr.b[38][3]++,friendName=="")){cov_1l82dguaqr.b[37][0]++;cov_1l82dguaqr.s[182]++;console.log("Chat connection denied");cov_1l82dguaqr.s[183]++;return next(new Error('Authentication error'));}else{cov_1l82dguaqr.b[37][1]++;}var sender=(cov_1l82dguaqr.s[184]++,await dbo.collection("users").findOne({"_id":ObjectID(userID)}));var reciever=(cov_1l82dguaqr.s[185]++,await dbo.collection("users").findOne({"username":friendName}));cov_1l82dguaqr.s[186]++;console.log("sender: ",sender._id);cov_1l82dguaqr.s[187]++;console.log("reciever: ",reciever._id);var sender_id=(cov_1l82dguaqr.s[188]++,sender._id);var reciever_id=(cov_1l82dguaqr.s[189]++,reciever._id);// return the result of next() to accept the connection.
cov_1l82dguaqr.s[190]++;if((cov_1l82dguaqr.b[40][0]++,sender!=null)&&(cov_1l82dguaqr.b[40][1]++,reciever!=null)){cov_1l82dguaqr.b[39][0]++;cov_1l82dguaqr.s[191]++;clients[sender_id+"->"+reciever_id]=socket;// messages
cov_1l82dguaqr.s[192]++;socket.on('message:private:send',function(msg){cov_1l82dguaqr.f[27]++;cov_1l82dguaqr.s[193]++;target=clients[reciever_id+"->"+sender_id];cov_1l82dguaqr.s[194]++;if(target){cov_1l82dguaqr.b[41][0]++;cov_1l82dguaqr.s[195]++;console.log("Private message sent: "+sender.username+" -> "+reciever.username);cov_1l82dguaqr.s[196]++;target.emit('message:private:recieve',msg);}else{cov_1l82dguaqr.b[41][1]++;cov_1l82dguaqr.s[197]++;console.log("Partner offline!");}});// login status
cov_1l82dguaqr.s[198]++;socket.on('disconnect',function(){cov_1l82dguaqr.f[28]++;cov_1l82dguaqr.s[199]++;clients[sender_id+"->"+reciever_id]=null;cov_1l82dguaqr.s[200]++;target=clients[reciever_id+"->"+sender_id];cov_1l82dguaqr.s[201]++;if(target){cov_1l82dguaqr.b[42][0]++;cov_1l82dguaqr.s[202]++;target.emit('status',"offline");}else{cov_1l82dguaqr.b[42][1]++;}});var target=(cov_1l82dguaqr.s[203]++,clients[reciever_id+"->"+sender_id]);cov_1l82dguaqr.s[204]++;if(target){cov_1l82dguaqr.b[43][0]++;cov_1l82dguaqr.s[205]++;socket.emit('status',"online");cov_1l82dguaqr.s[206]++;target.emit('status',"online");}else{cov_1l82dguaqr.b[43][1]++;}cov_1l82dguaqr.s[207]++;console.log("Chat connection accepted: "+sender.username+" -> "+reciever.username);cov_1l82dguaqr.s[208]++;return next();}else{cov_1l82dguaqr.b[39][1]++;cov_1l82dguaqr.s[209]++;console.log("Chat connection denied");cov_1l82dguaqr.s[210]++;return next(new Error('Authentication error'));}});cov_1l82dguaqr.s[211]++;io.sockets.on('connection',function(socket){cov_1l82dguaqr.f[29]++;cov_1l82dguaqr.s[212]++;// client connected
console.log('+ a user connected');cov_1l82dguaqr.s[213]++;socket.on('disconnect',function(){cov_1l82dguaqr.f[30]++;cov_1l82dguaqr.s[214]++;console.log('- user disconnected');// client disconnected
});cov_1l82dguaqr.s[215]++;socket.on('send message',function(data){cov_1l82dguaqr.f[31]++;cov_1l82dguaqr.s[216]++;// Send to all users
io.sockets.emit('new message',data);});});cov_1l82dguaqr.s[217]++;module.exports=app;cov_1l82dguaqr.s[218]++;module.exports.connect=connect;// Start server
cov_1l82dguaqr.s[219]++;server.listen(3000,function(){cov_1l82dguaqr.f[32]++;cov_1l82dguaqr.s[220]++;console.log('Example app listening on port 3000!');});/*
// Sample code below
//GETALL
	dbo.collection("messages").find({}).toArray(function(err, result){
		if(err){res.status(500).send("Unknown error.");}

		res.send(result);
	});

// Save message
	var msgObj = {message: _message, flag : false};

// Insert the message object into the messages collection
	dbo.collection("messages").insertOne(msgObj, function(err, res){
		if(err){res.status(500).send("Unknown error.");}
		console.log("Inserted message.");
	});

// GET parameters
	var _message = req.query.msg;
	*/